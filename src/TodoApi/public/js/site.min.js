"use strict";const uri="api/todo";let todos=null;function getData(){$.ajax({type:"GET",url:uri,success:function(t){getDataSuccess(t,updateCount)}})}function addItem(){var t={name:$("#add-name").val(),isComplete:!1};$.ajax({type:"POST",accepts:"application/json",url:uri,contentType:"application/json",data:JSON.stringify(t),error:function(t,e,o){alert(e)},success:function(t){getData(),$("#add-name").val("")}})}function deleteItem(){var t=$(this).data("id");$.ajax({url:uri+"/"+t,type:"DELETE",success:getData})}function editItem(){var o=$(this).data("id");$.each(todos,function(t,e){e.id===o&&($("#edit-name").val(e.name),$("#edit-id").val(e.id),$("#edit-isComplete")[0].checked=e.isComplete)}),$("#spoiler").css({display:"block"})}function onSubmitForm(){var t={name:$("#edit-name").val(),isComplete:$("#edit-isComplete").is(":checked"),id:new Number($("#edit-id").val())};return $.ajax({url:uri+"/"+$("#edit-id").val(),type:"PUT",accepts:"application/json",contentType:"application/json",data:JSON.stringify(t),success:function(t){getData()}}),closeInput(),!1}function onReady(){$(".edit-form").on("submit",onSubmitForm),$(".add-form").on("submit",addItem),$(".close-spoiler").on("click",closeInput),getData()}function closeInput(){$("#spoiler").css({display:"none"})}function updateCount(t){const e=$("#counter"),o=$("#todo-list");let a="to-do";t?(1<t&&(a="to-dos"),e.text(t+" "+a)):e.html("No "+a),t?o.show():o.hide()}function getDataSuccess(t,e){$("#todos").empty(),e(t.length),$.each(t,function(t,e){let o=$('<input disabled="true" type="checkbox">');$("#todos").append($("<tr>").append($("<td>").append(o)).append($("<td>").text(e.name)).append($("<td>").append($("<button>").text("Edit").data("id",e.id).on("click",editItem))).append($("<td>").append($("<button>").text("Delete").data("id",e.id).on("click",deleteItem)))),o.prop("checked",!!e.isComplete)}),todos=t}"undefined"!=typeof exports&&(exports.getDataSuccess=getDataSuccess,exports.getData=getData,exports.addItem=addItem,exports.deleteItem=deleteItem,exports.editItem=editItem,exports.updateCount=updateCount,exports.closeInput=closeInput,exports.onSubmitForm=onSubmitForm,exports.onReady=onReady,exports.get_Todos=()=>todos,exports.set_Todos=t=>{todos=t});